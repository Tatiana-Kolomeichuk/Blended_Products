{"version":3,"file":"index.js","sources":["../src/js/constants.js","../src/js/refs.js","../src/js/helpers.js","../src/js/products-api.js","../src/js/render-function.js","../src/js/modal.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["export const API_BASE_URL = 'https://dummyjson.com';\nexport const API_ENDPOINTS = {\n  PRODUCTS: '/products',\n  PRODUCTS_BY_ID: '/products/',\n  CATEGORIES: '/products/category-list',\n  CATEGORY: 'products/category/',\n  SEARCH: '/products/search',\n};\nexport const ITEMS_PER_PAGE = 12;\nexport const STATE = {\n  QUERY: '',\n  PAGE: 1,\n};\n","export const refs = {\n  closeModalBtn: document.querySelector('.modal__close-btn'),\n  modal: document.querySelector('.modal'),\n  body: document.querySelector('body'),\n  themeToggleBtn: document.querySelector('.theme-toggle-btn'),\n  categoriesList: document.querySelector('.categories'),\n  productsList: document.querySelector('.products'),\n  notFoundBlock: document.querySelector('div.not-found'),\n  modalContainer : document.querySelector('.modal-product')\n};\n","import { refs } from './refs';\n\nexport function toggleTheme(theme) {\n  document.body.setAttribute('data-theme', theme);\n  document.body.dataset.theme = theme;\n\n  refs.themeToggleBtn.innerHTML = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';\n}\n\nexport function clearProductsList() {\n  refs.productsList.innerHTML = '';\n}\n\nexport function updateActiveCategory(activeEl) {\n  const oldActiveEl = document.querySelector('.categories__btn--active');\n  if (oldActiveEl) {\n    oldActiveEl.classList.remove('categories__btn--active');\n  }\n  activeEl.classList.add('categories__btn--active');\n}\n\nexport function showNotFoundBlock() {\n  refs.notFoundBlock.classList.add('not-found--visible');\n}\n\nexport function hideNotFoundBlock() {\n  refs.notFoundBlock.classList.remove('not-found--visible');\n}\n","import axios from 'axios';\nimport { API_BASE_URL, API_ENDPOINTS, ITEMS_PER_PAGE } from './constants';\naxios.defaults.baseURL = API_BASE_URL;\n\nexport async function getProducts(page) {\n  const skip = (page - 1) * ITEMS_PER_PAGE;\n\n  const { data } = await axios.get(\n    `${API_ENDPOINTS.PRODUCTS}?limit=${ITEMS_PER_PAGE}&skip=${skip}`\n  );\n  return data;\n}\n\nexport async function getCategories() {\n  const { data } = await axios.get(API_ENDPOINTS.CATEGORIES);\n  return data;\n}\n\nexport async function getProductsByCategory(query, page) {\n  const skip = (page - 1) * ITEMS_PER_PAGE;\n  const { data } = await axios.get(\n    `${API_ENDPOINTS.CATEGORY}${query}?limit=${ITEMS_PER_PAGE}&skip=${skip}`\n  );\n  return data;\n}\n\n\nexport async function getProductById(id) {\n  const { data } = await axios.get(`${API_ENDPOINTS.PRODUCTS_BY_ID}${id}`);\n  return data; \n}","import { refs } from './refs';\nexport async function renderProducts(products) {\n  const markup = products\n    .map(\n      ({\n        thumbnail,\n        id,\n        description,\n        title,\n        price,\n        category,\n        brand,\n      }) => `<li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${description}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:${\n      brand || 'no brand'\n    }</span></p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price}$</p>\n </li>`\n    )\n    .join('');\n  refs.productsList.insertAdjacentHTML('beforeEnd', markup);\n}\nexport function renderCategories(categories) {\n  const categoryList = ['All', ...categories];\n  const markup = categoryList\n    .map(\n      item =>\n        `<li class=\"categories__item\">\n    <button class=\"categories__btn\" type=\"button\">${item}</button>\n    </li>`\n    )\n    .join('');\n  refs.categoriesList.innerHTML = markup;\n}\nexport function renderModalProduct(product) {\n  \n  if (!refs.modalContainer) return;\n\n  const {\n    images = [],\n    thumbnail = '',\n    title = 'Unnamed product',\n    description = '‚Äî',\n    price = null,\n    brand = '',\n    category = '',\n    tags,\n  } = product || {};\n\n  const imgSrc = images[0] || thumbnail || '';\n  const finalTags = Array.isArray(tags) ? tags : [brand, category].filter(Boolean);\n  const tagsMarkup = finalTags.map(t => `<li>${String(t)}</li>`).join('');\n\n  refs.modalContainer.innerHTML = `\n    <img class=\"modal-product__img\" src=\"${imgSrc}\" alt=\"${title}\" />\n    <div class=\"modal-product__content\">\n      <p class=\"modal-product__title\">${title}</p>\n      <ul class=\"modal-product__tags\">${tagsMarkup}</ul>\n      <p class=\"modal-product__description\">${description}</p>\n      <p class=\"modal-product__shipping-information\">Shipping: ‚Äî</p>\n      <p class=\"modal-product__return-policy\">Return Policy: ‚Äî</p>\n      <p class=\"modal-product__price\">Price: $${price != null ? Number(price).toFixed(2) : '‚Äî'}</p>\n      <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n    </div>\n  `;\n}","import { refs } from \"./refs\";\n\nexport function openModal() {\n    refs.modal.classList.add(\"modal--is-open\")\n    refs.body.style.overflow = \"hidden\"\n    window.addEventListener('keydown', onEscapePress);\n    refs.modal.addEventListener(\"click\", onBackdropClick)\n}\n\nexport function closeModal() {\n    refs.modal.classList.remove(\"modal--is-open\")\n    refs.body.style.overflow = \"\"\n    window.removeEventListener(\"keydown\", onEscapePress)\n    refs.modal.removeEventListener(\"click\", onBackdropClick)\n}\n\nfunction onEscapePress(e) {\n    if (e.code === \"Escape\") {\n        closeModal();\n    }\n}\n\nfunction onBackdropClick(e) {\n    if (e.currentTarget === e.target) {\n        closeModal()\n    }\n}\n","import { STATE } from './constants';\nimport {\n  clearProductsList,\n  hideNotFoundBlock,\n  showNotFoundBlock,\n  updateActiveCategory,\n} from './helpers';\nimport {\n  getCategories,\n  getProductById,\n  getProducts,\n  getProductsByCategory,\n} from './products-api';\nimport { renderCategories, renderModalProduct, renderProducts } from './render-function';\nimport { refs } from './refs';\nimport { openModal } from './modal';\n\nexport async function initHomePage() {\n  try {\n    const categories = await getCategories();\n    renderCategories(categories);\n    const { products } = await getProducts(STATE.PAGE);\n    renderProducts(products);\n  } catch (error) {}\n}\n\nexport async function handleCategoryClick(e) {\n  const btnEl = e.target.closest('.categories__btn');\n  if (!btnEl) {\n    return;\n  }\n  clearProductsList();\n  updateActiveCategory(btnEl);\n  hideNotFoundBlock();\n  STATE.PAGE = 1;\n  const query = btnEl.textContent;\n  if (query === 'All') {\n    try {\n      const { products } = await getProducts(STATE.PAGE);\n      renderProducts(products);\n    } catch (err) {\n      console.error(`Get products error: ${err}`);\n    }\n  } else {\n    STATE.QUERY = query;\n    try {\n      const { products } = await getProductsByCategory(STATE.QUERY, STATE.PAGE);\n      if (products.length === 0) {\n        showNotFoundBlock();\n      } else {\n        renderProducts(products);\n      }\n    } catch (err) {\n      console.error(`Get products error: ${err}`);\n    }\n  }\n}\nexport async function onProductClick(e) {\n  const card = e.target.closest('.products__item');\n  if (!card || !refs.productsList.contains(card)) return;\n\n  const id = card.dataset.id;\n  if (!id) return;\n\n  try {\n    const product = await getProductById(id);\n    renderModalProduct(product);\n    openModal();\n  } catch (err) {\n    console.error('–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç:', err);\n  }\n}","//–õ–æ–≥—ñ–∫–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ Home\nimport { handleCategoryClick, initHomePage, onProductClick} from './js/handlers';\nimport { closeModal, openModal } from './js/modal';\nimport { refs } from './js/refs';\n\ndocument.addEventListener('DOMContentLoaded', initHomePage);\nrefs.closeModalBtn.addEventListener('click', closeModal);\nrefs.categoriesList.addEventListener('click', handleCategoryClick);\nrefs.productsList.addEventListener('click',  onProductClick);"],"names":["API_BASE_URL","API_ENDPOINTS","ITEMS_PER_PAGE","STATE","refs","clearProductsList","updateActiveCategory","activeEl","oldActiveEl","showNotFoundBlock","hideNotFoundBlock","axios","getProducts","page","skip","data","getCategories","getProductsByCategory","query","getProductById","id","renderProducts","products","markup","thumbnail","description","title","price","category","brand","renderCategories","categories","item","renderModalProduct","product","images","tags","imgSrc","tagsMarkup","t","openModal","onEscapePress","onBackdropClick","closeModal","e","initHomePage","handleCategoryClick","btnEl","err","onProductClick","card"],"mappings":"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"}