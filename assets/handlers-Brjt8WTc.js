import{a as p}from"./vendor-EEf_bTFo.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(s){if(s.ep)return;s.ep=!0;const c=o(s);fetch(s.href,c)}})();const R="https://dummyjson.com",f={PRODUCTS:"/products",PRODUCTS_BY_ID:"/products/",CATEGORIES:"/products/category-list",CATEGORY:"products/category/",SEARCH:"/products/search"},l=12,a={QUERY:"",PAGE:1},n={body:document.body,themeToggleBtn:document.querySelector(".theme-toggle-btn"),searchForm:document.querySelector(".search-form"),categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),wishlistProductList:document.querySelector(".products-wish"),buyBtnCart:document.querySelector(".cart-summary__btn"),cartSummary:document.querySelector("[data-count]"),cartSummaryPrice:document.querySelector("[data-price]"),modal:document.querySelector(".modal"),modalContainer:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),addToCartModalBtn:document.querySelector(".modal-product__btn--cart"),addTowishlistBtn:document.querySelector(".modal-product__btn--wishlist"),cartCountSpan:document.querySelector("[data-cart-count]"),wishlistCountSpan:document.querySelector("[data-wishlist-count]"),notFoundBlock:document.querySelector(".not-found"),loadMoreBtn:document.querySelector(".load-more-btn")};function m(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(o){console.error("Error saving to LocalStorage:",o)}}function u(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.error("Error loading from LocalStorage:",t),null}}function V(e){document.body.hasAttribute("data-theme")?(document.body.removeAttribute("data-theme"),n.themeToggleBtn.textContent="â˜€ï¸",m("theme","light")):(document.body.setAttribute("data-theme","dark"),n.themeToggleBtn.textContent="ðŸŒ™",m("theme","dark"))}function E(){const t=u("theme")==="dark"?"dark":"light";document.body.setAttribute("data-theme",t),document.body.dataset.theme=t,n.themeToggleBtn.textContent=t==="light"?"â˜€ï¸":"ðŸŒ™"}function P(){n.productsList.innerHTML=""}function M(e){const t=document.querySelector(".categories__btn--active");t&&t.classList.remove("categories__btn--active"),e.classList.add("categories__btn--active")}function $(){n.notFoundBlock.classList.add("not-found--visible")}function v(){n.notFoundBlock.classList.remove("not-found--visible")}function x(){const e=document.querySelector(".categories__btn--active");e&&e.classList.remove("categories__btn--active")}function G(e){Math.ceil(e/l)>a.PAGE?n.loadMoreBtn.classList.remove("is-hidden"):n.loadMoreBtn.classList.add("is-hidden")}function O(){n.loadMoreBtn.classList.add("is-hidden")}p.defaults.baseURL=R;async function A(e){const t=(e-1)*l,{data:o}=await p.get(`${f.PRODUCTS}?limit=${l}&skip=${t}`);return o}async function D(){const{data:e}=await p.get(f.CATEGORIES);return e}async function F(e,t){const o=(t-1)*l,{data:r}=await p.get(`${f.CATEGORY}${e}?limit=${l}&skip=${o}`);return r}async function g(e){const{data:t}=await p.get(`${f.PRODUCTS_BY_ID}${e}`);return t}async function U(){const e=(a.PAGE-1)*l;return(await p.get(`${f.SEARCH}?q=${a.QUERY}&limit=${l}&skip=${e}`)).data}async function h(e){const t=e.map(({thumbnail:o,id:r,description:s,title:c,price:i,category:C,brand:S})=>`<li class="products__item" data-id="${r}">
    <img class="products__image" src="${o}" alt="${s}"/>
    <p class="products__title">${c}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${S||"no brand"}</span></p>
    <p class="products__category">Category: ${C}</p>
    <p class="products__price">Price: ${i}$</p>
 </li>`).join("");n.productsList.insertAdjacentHTML("beforeEnd",t)}function Y(e){const o=["All",...e].map(r=>`<li class="categories__item">
    <button class="categories__btn" type="button">${r}</button>
    </li>`).join("");n.categoriesList.innerHTML=o}function T(e){const{id:t,images:o,title:r,description:s,tags:c,price:i,shippingInformation:C="Standard shipping",returnPolicy:S="30 days return"}=e,q=`
      <img class="modal-product__img" src="${o[0]}" alt="${r}" />
     <div class="modal-product__content data-id="${t}">
        <p class="modal-product__title">${r}</p>
        <ul class="modal-product__tags">${c}</ul>
        <p class="modal-product__description">${s}</p>
        <p class="modal-product__shipping-information">Shipping: ${C}</p>
        <p class="modal-product__return-policy">Return Policy: ${S}</p>
        <p class="modal-product__price">Price: ${i}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`;n.modalContainer.innerHTML=q}function N(e){const t=e.length;n.cartSummary.textContent=t;let o=0;for(const r of e)o+=r.price;n.cartSummaryPrice.textContent=o.toFixed(2)}function H({id:e,thumbnail:t,description:o,title:r,brand:s,category:c,price:i}){return`<li class="products__item" data-id="${e}">
    <img class="products__image" src="${t}" alt="${o}"/>
    <p class="products__title">${r}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${s}</span></p>
    <p class="products__category">Category: ${c}</p>
    <p class="products__price">Price: ${i}$</p>
 </li>
`}function B(e){return e.map(H).join("")}function k(){n.modal.classList.add("modal--is-open"),n.body.style.overflow="hidden",window.addEventListener("keydown",y),n.modal.addEventListener("click",I)}function w(){n.modal.classList.remove("modal--is-open"),n.body.style.overflow="",window.removeEventListener("keydown",y),n.modal.removeEventListener("click",I)}function y(e){e.code==="Escape"&&w()}function I(e){e.currentTarget===e.target&&w()}let d=null,L=u("wishlist")||[];const W="cartItems",j="wishlist";async function J(){E();try{const e=await D();Y(e);const{products:t}=await A(a.PAGE);h(t)}catch(e){console.error("Failed to initialize home page:",e)}}async function z(e){const t=e.target.closest(".categories__btn");if(!t)return;P(),M(t),v(),a.PAGE=1;const o=t.textContent;if(o==="All")try{const{products:r}=await A(a.PAGE);h(r)}catch(r){console.error(`Get products error: ${r}`)}else{a.QUERY=o;try{const{products:r}=await F(a.QUERY,a.PAGE);r.length===0?$():h(r)}catch(r){console.error(`Get products error: ${r}`)}}}async function X(e){const t=e.target.closest(".products__item");if(!t||!n.productsList.contains(t))return;const o=t.dataset.id;if(o)try{d=o;const r=await g(o);T(r),k()}catch(r){console.error("ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ñ‚Ð¸ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚:",r)}}async function Z(e){e.preventDefault();const o=new FormData(e.target).get("searchValue").trim();if(!o){alert("type something");return}P(),v(),x(),O(),a.QUERY=o,a.PAGE=1;try{const{products:r,total:s}=await U(a.QUERY,a.PAGE);r!=null&&r.length?(h(r),G(s)):$()}catch(r){console.error(`Get product error: ${r}`)}e.target.reset()}//!============================= CART PAGE ================================
async function Q(){const e=u("cartItems")||[];try{const t=await Promise.all(e.map(o=>g(Number(o))));n.productsList.innerHTML=B(t),_(e.length),b(),N(t)}catch(t){console.log(t)}}function b(){const t=(u("wishlist")||[]).length;n.wishlistCountSpan&&(n.wishlistCountSpan.textContent=String(t))}function _(e=0){n.cartCountSpan&&(n.cartCountSpan.textContent=String(e))}async function tt(e){const t=e.target.closest("li.products__item");if(!t)return;const o=Number(t.dataset.id);if(o)try{const r=await g(o);T(r),k(),W.includes(o)?n.addToCartModalBtn.textContent="Remove from cart":n.addToCartModalBtn.textContent="Add to cart",j.includes(o)?n.addTowishlistBtn.textContent="Remove from Wishlist":n.addTowishlistBtn.textContent="Add to Wishlist",window.addEventListener("keydown",y)}catch(r){console.error("Error opening product modal:",r)}}function et(){w(),window.removeEventListener("keydown",y)}function ot(e){if(d===null)return;let t=u("cartItems")||[];const o=e.target;t.includes(d)?(t=t.filter(r=>r!==d),o&&(o.textContent="Add to Cart")):(t.push(d),o&&(o.textContent="Remove from Cart")),m("cartItems",t),_(t.length)}function rt(e){if(d===null)return;let t=u("wishlist")||[];const o=e.target;t.includes(d)?(t=t.filter(r=>r!==d),o.textContent="Add to Wishlist"):(t.push(d),o.textContent="Remove from Wishlist"),m("wishlist",t),b(t.length)}function nt(){m("cartItems",[]),_(0),Q()}function st(e){e.preventDefault(),window.location.replace("/index.html");const o=new FormData(e.target).get("searchValue");m("inputValue",o)}//!==================== WISHLIST PAGE =================================
async function ct(e){L=u("wishlist")||[],E();try{const t=L.map(s=>g(s)),o=await Promise.all(t),r=B(o);n.wishlistProductList.innerHTML=r,b(),_()}catch(t){console.log(t)}}export{tt as a,et as b,w as c,ot as d,rt as e,st as f,J as g,ct as h,E as i,z as j,Z as k,Q as l,nt as m,X as o,n as r,V as t};
//# sourceMappingURL=handlers-Brjt8WTc.js.map
