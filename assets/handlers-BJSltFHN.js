import{a as l}from"./vendor-EEf_bTFo.js";const k="https://dummyjson.com",g={PRODUCTS:"/products",PRODUCTS_BY_ID:"/products/",CATEGORIES:"/products/category-list",CATEGORY:"products/category/",SEARCH:"/products/search"},i=12,a={QUERY:"",PAGE:1},r={body:document.body,themeToggleBtn:document.querySelector(".theme-toggle-btn"),searchForm:document.querySelector(".search-form"),categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),buyBtnCart:document.querySelector(".cart-summary__btn"),cartSummary:document.querySelector("[data-count]"),cartSummaryPrice:document.querySelector("[data-price]"),modal:document.querySelector(".modal"),modalContainer:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),addToCartModalBtn:document.querySelector(".modal-product__btn--cart"),addTowishlistBtn:document.querySelector(".modal-product__btn--wishlist"),cartCountSpan:document.querySelector("[data-cart-count]"),wishlistCountSpan:document.querySelector("[data-wishlist-count]"),notFoundBlock:document.querySelector(".not-found"),loadMoreBtn:document.querySelector(".load-more-btn")};function d(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(o){console.error("Error saving to LocalStorage:",o)}}function u(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(e){return console.error("Error loading from LocalStorage:",e),null}}function Q(t){document.body.hasAttribute("data-theme")?(document.body.removeAttribute("data-theme"),r.themeToggleBtn.textContent="â˜€ï¸",d("theme","light")):(document.body.setAttribute("data-theme","dark"),r.themeToggleBtn.textContent="ðŸŒ™",d("theme","dark"))}function I(){const e=u("theme")==="dark"?"dark":"light";document.body.setAttribute("data-theme",e),document.body.dataset.theme=e,r.themeToggleBtn.textContent=e==="light"?"â˜€ï¸":"ðŸŒ™"}function b(){r.productsList.innerHTML=""}function R(t){const e=document.querySelector(".categories__btn--active");e&&e.classList.remove("categories__btn--active"),t.classList.add("categories__btn--active")}function w(){r.notFoundBlock.classList.add("not-found--visible")}function E(){r.notFoundBlock.classList.remove("not-found--visible")}function q(){const t=document.querySelector(".categories__btn--active");t&&t.classList.remove("categories__btn--active")}function x(t){Math.ceil(t/i)>a.PAGE?r.loadMoreBtn.classList.remove("is-hidden"):r.loadMoreBtn.classList.add("is-hidden")}function M(){r.loadMoreBtn.classList.add("is-hidden")}l.defaults.baseURL=k;async function $(t){const e=(t-1)*i,{data:o}=await l.get(`${g.PRODUCTS}?limit=${i}&skip=${e}`);return o}async function G(){const{data:t}=await l.get(g.CATEGORIES);return t}async function D(t,e){const o=(e-1)*i,{data:n}=await l.get(`${g.CATEGORY}${t}?limit=${i}&skip=${o}`);return n}async function _(t){const{data:e}=await l.get(`${g.PRODUCTS_BY_ID}${t}`);return e}async function F(){const t=(a.PAGE-1)*i;return(await l.get(`${g.SEARCH}?q=${a.QUERY}&limit=${i}&skip=${t}`)).data}async function h(t){const e=t.map(({thumbnail:o,id:n,description:c,title:m,price:p,category:f,brand:y})=>`<li class="products__item" data-id="${n}">
    <img class="products__image" src="${o}" alt="${c}"/>
    <p class="products__title">${m}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${y||"no brand"}</span></p>
    <p class="products__category">Category: ${f}</p>
    <p class="products__price">Price: ${p}$</p>
 </li>`).join("");r.productsList.insertAdjacentHTML("beforeEnd",e)}function U(t){const o=["All",...t].map(n=>`<li class="categories__item">
    <button class="categories__btn" type="button">${n}</button>
    </li>`).join("");r.categoriesList.innerHTML=o}function L(t){const{id:e,images:o,title:n,description:c,tags:m,price:p,shippingInformation:f="Standard shipping",returnPolicy:y="30 days return"}=t,T=`
      <img class="modal-product__img" src="${o[0]}" alt="${n}" />
     <div class="modal-product__content data-id="${e}">
        <p class="modal-product__title">${n}</p>
        <ul class="modal-product__tags">${m}</ul>
        <p class="modal-product__description">${c}</p>
        <p class="modal-product__shipping-information">Shipping: ${f}</p>
        <p class="modal-product__return-policy">Return Policy: ${y}</p>
        <p class="modal-product__price">Price: ${p}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`;r.modalContainer.innerHTML=T}function O(t){const e=t.length;r.cartSummary.textContent=e;let o=0;for(const n of t)o+=n.price;r.cartSummaryPrice.textContent=o.toFixed(2)}function Y({id:t,thumbnail:e,description:o,title:n,brand:c,category:m,price:p}){return`<li class="products__item" data-id="${t}">
    <img class="products__image" src="${e}" alt="${o}"/>
    <p class="products__title">${n}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${c}</span></p>
    <p class="products__category">Category: ${m}</p>
    <p class="products__price">Price: ${p}$</p>
 </li>
`}function H(t){return t.map(Y).join("")}function P(){r.modal.classList.add("modal--is-open"),r.body.style.overflow="hidden",window.addEventListener("keydown",C),r.modal.addEventListener("click",A)}function v(){r.modal.classList.remove("modal--is-open"),r.body.style.overflow="",window.removeEventListener("keydown",C),r.modal.removeEventListener("click",A)}function C(t){t.code==="Escape"&&v()}function A(t){t.currentTarget===t.target&&v()}let s=null,N=u("wishlist")||[];async function V(){I();try{const t=await G();U(t);const{products:e}=await $(a.PAGE);h(e)}catch(t){console.error("Failed to initialize home page:",t)}}async function J(t){const e=t.target.closest(".categories__btn");if(!e)return;b(),R(e),E(),a.PAGE=1;const o=e.textContent;if(o==="All")try{const{products:n}=await $(a.PAGE);h(n)}catch(n){console.error(`Get products error: ${n}`)}else{a.QUERY=o;try{const{products:n}=await D(a.QUERY,a.PAGE);n.length===0?w():h(n)}catch(n){console.error(`Get products error: ${n}`)}}}async function z(t){const e=t.target.closest(".products__item");if(!e||!r.productsList.contains(e))return;const o=e.dataset.id;if(o)try{s=o;const n=await _(o);L(n),P()}catch(n){console.error("ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ñ‚Ð¸ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚:",n)}}async function K(t){t.preventDefault();const o=new FormData(t.target).get("searchValue").trim();if(!o){alert("type something");return}b(),E(),q(),M(),a.QUERY=o,a.PAGE=1;try{const{products:n,total:c}=await F(a.QUERY,a.PAGE);n!=null&&n.length?(h(n),x(c)):w()}catch(n){console.error(`Get product error: ${n}`)}t.target.reset()}//!============================= CART PAGE ================================
async function W(){const t=u("cartItems")||[];try{const e=await Promise.all(t.map(o=>_(Number(o))));r.productsList.innerHTML=H(e),S(t.length),B(),O(e)}catch(e){console.log(e)}}function B(){const e=(u("wishlist")||[]).length;r.wishlistCountSpan&&(r.wishlistCountSpan.textContent=String(e))}function S(t=0){r.cartCountSpan&&(r.cartCountSpan.textContent=String(t))}async function X(t){const e=t.target.closest("li.products__item");if(!e)return;const o=Number(e.dataset.id);if(o)try{const n=await _(o);L(n),P(),cartItems.includes(o)?r.addToCartModalBtn.textContent="Remove from cart":r.addToCartModalBtn.textContent="Add to cart",N.includes(o)?r.addTowishlistBtn.textContent="Remove from Wishlist":r.addTowishlistBtn.textContent="Add to Wishlist",C()}catch(n){console.error("Error opening product modal:",n)}}function Z(t){if(s===null)return;let e=u("cartItems")||[];const o=t.target;e.includes(s)?(e=e.filter(n=>n!==s),o&&(o.textContent="Add to Cart")):(e.push(s),o&&(o.textContent="Remove from Cart")),d("cartItems",e),S(e.length)}function tt(t){if(s===null)return;let e=u("wishlist")||[];const o=t.target;e.includes(s)?(e=e.filter(n=>n!==s),o.textContent="Add to Wishlist"):(e.push(s),o.textContent="Remove from Wishlist"),d("wishlist",e),B(e.length)}function et(){d("cartItems",[]),S(0),W()}function ot(t){t.preventDefault(),window.location.replace("/index.html");const o=new FormData(t.target).get("searchValue");d("inputValue",o)}export{V as a,K as b,v as c,Z as d,tt as e,X as f,et as g,J as h,I as i,W as j,ot as k,z as o,r,Q as t};
//# sourceMappingURL=handlers-BJSltFHN.js.map
