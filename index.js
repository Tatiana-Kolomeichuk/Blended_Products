import"./assets/styles-JE8YjOlG.js";import{a}from"./assets/vendor-2s9xPmg-.js";const P="https://dummyjson.com",d={PRODUCTS:"/products",PRODUCTS_BY_ID:"/products/",CATEGORIES:"/products/category-list",CATEGORY:"products/category/",SEARCH:"/products/search"},s=12,n={QUERY:"",PAGE:1},r={closeModalBtn:document.querySelector(".modal__close-btn"),modal:document.querySelector(".modal"),body:document.querySelector("body"),themeToggleBtn:document.querySelector(".theme-toggle-btn"),categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),notFoundBlock:document.querySelector("div.not-found"),modalContainer:document.querySelector(".modal-product"),searchForm:document.querySelector(".search-form"),loadMoreBtn:document.querySelector(".load-more-btn")};function S(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(c){console.error("Error saving to LocalStorage:",c)}}function $(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(e){return console.error("Error loading from LocalStorage:",e),null}}const _="theme";function A(t){document.body.setAttribute("data-theme",t),document.body.dataset.theme=t,r.themeToggleBtn.innerHTML=t==="light"?"ðŸŒ™":"â˜€ï¸",S(_,t)}function k(){$(_),r.themeToggleBtn.addEventListener("click",()=>{const t=document.body.dataset.theme==="light"?"dark":"light";A(t)})}function f(){r.productsList.innerHTML=""}function T(t){const e=document.querySelector(".categories__btn--active");e&&e.classList.remove("categories__btn--active"),t.classList.add("categories__btn--active")}function E(){r.notFoundBlock.classList.add("not-found--visible")}function L(){r.notFoundBlock.classList.remove("not-found--visible")}function C(){const t=document.querySelector(".categories__btn--active");t&&t.classList.remove("categories__btn--active")}function w(t){Math.ceil(t/s)>n.PAGE?r.loadMoreBtn.classList.remove("is-hidden"):r.loadMoreBtn.classList.add("is-hidden")}function B(){r.loadMoreBtn.classList.add("is-hidden")}a.defaults.baseURL=P;async function h(t){const e=(t-1)*s,{data:c}=await a.get(`${d.PRODUCTS}?limit=${s}&skip=${e}`);return c}async function M(){const{data:t}=await a.get(d.CATEGORIES);return t}async function R(t,e){const c=(e-1)*s,{data:o}=await a.get(`${d.CATEGORY}${t}?limit=${s}&skip=${c}`);return o}async function G(t){const{data:e}=await a.get(`${d.PRODUCTS_BY_ID}${t}`);return e}async function q(){const t=(n.PAGE-1)*s;return(await a.get(`${d.SEARCH}?q=${n.QUERY}&limit=${s}&skip=${t}`)).data}async function l(t){const e=t.map(({thumbnail:c,id:o,description:i,title:u,price:p,category:m,brand:g})=>`<li class="products__item" data-id="${o}">
    <img class="products__image" src="${c}" alt="${i}"/>
    <p class="products__title">${u}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${g||"no brand"}</span></p>
    <p class="products__category">Category: ${m}</p>
    <p class="products__price">Price: ${p}$</p>
 </li>`).join("");r.productsList.insertAdjacentHTML("beforeEnd",e)}function D(t){const c=["All",...t].map(o=>`<li class="categories__item">
    <button class="categories__btn" type="button">${o}</button>
    </li>`).join("");r.categoriesList.innerHTML=c}function I(t){const{images:e,title:c,description:o,tags:i,price:u,shippingInformation:p,returnPolicy:m}=t,g=`<img class="modal-product__img" src="${e[0]}" alt="${c}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${c}</p>
        <ul class="modal-product__tags">${i}</ul>
        <p class="modal-product__description">${o}</p>
        <p class="modal-product__shipping-information">Shipping: ${p}</p>
        <p class="modal-product__return-policy">Return Policy: ${m}</p>
        <p class="modal-product__price">Price: ${u}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`;r.modalContainer.innerHTML=g}function O(){r.modal.classList.add("modal--is-open"),r.body.style.overflow="hidden",window.addEventListener("keydown",b),r.modal.addEventListener("click",v)}function y(){r.modal.classList.remove("modal--is-open"),r.body.style.overflow="",window.removeEventListener("keydown",b),r.modal.removeEventListener("click",v)}function b(t){t.code==="Escape"&&y()}function v(t){t.currentTarget===t.target&&y()}async function U(){try{const t=await M();D(t);const{products:e}=await h(n.PAGE);l(e)}catch{}}async function Y(t){const e=t.target.closest(".categories__btn");if(!e)return;f(),T(e),L(),n.PAGE=1;const c=e.textContent;if(c==="All")try{const{products:o}=await h(n.PAGE);l(o)}catch(o){console.error(`Get products error: ${o}`)}else{n.QUERY=c;try{const{products:o}=await R(n.QUERY,n.PAGE);o.length===0?E():l(o)}catch(o){console.error(`Get products error: ${o}`)}}}async function F(t){const e=t.target.closest(".products__item");if(!e||!r.productsList.contains(e))return;const c=e.dataset.id;if(c)try{const o=await G(c);I(o),O()}catch(o){console.error("ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ñ‚Ð¸ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚:",o)}}async function H(t){t.preventDefault();const c=new FormData(t.target).get("searchValue").trim();if(!c){alert("type something");return}f(),L(),C(),B(),n.QUERY=c,n.PAGE=1;try{const{products:o,total:i}=await q(n.QUERY,n.PAGE);o!=null&&o.length?(l(o),w(i)):E()}catch(o){console.error(`Get product error: ${o}`)}t.target.reset()}document.addEventListener("DOMContentLoaded",()=>{k(),U()});r.closeModalBtn.addEventListener("click",y);r.categoriesList.addEventListener("click",Y);r.productsList.addEventListener("click",F);r.searchForm.addEventListener("submit",H);
//# sourceMappingURL=index.js.map
