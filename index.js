import"./assets/styles-JE8YjOlG.js";import{a}from"./assets/vendor-2s9xPmg-.js";const E="https://dummyjson.com",d={PRODUCTS:"/products",PRODUCTS_BY_ID:"/products/",CATEGORIES:"/products/category-list",CATEGORY:"products/category/",SEARCH:"/products/search"},r=12,n={QUERY:"",PAGE:1},s={closeModalBtn:document.querySelector(".modal__close-btn"),modal:document.querySelector(".modal"),body:document.querySelector("body"),themeToggleBtn:document.querySelector(".theme-toggle-btn"),categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),notFoundBlock:document.querySelector("div.not-found")};function f(){s.productsList.innerHTML=""}function L(t){const o=document.querySelector(".categories__btn--active");o&&o.classList.remove("categories__btn--active"),t.classList.add("categories__btn--active")}function b(){s.notFoundBlock.classList.add("not-found--visible")}function A(){s.notFoundBlock.classList.remove("not-found--visible")}a.defaults.baseURL=E;async function l(t){const o=(t-1)*r,{data:c}=await a.get(`${d.PRODUCTS}?limit=${r}&skip=${o}`);return c}async function P(){const{data:t}=await a.get(d.CATEGORIES);return t}async function v(t,o){const c=(o-1)*r,{data:e}=await a.get(`${d.CATEGORY}${t}?limit=${r}&skip=${c}`);return e}async function i(t){const o=t.map(({thumbnail:c,id:e,description:p,title:g,price:m,category:y,brand:_})=>`<li class="products__item" data-id="${e}">
    <img class="products__image" src="${c}" alt="${p}"/>
    <p class="products__title">${g}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${_||"no brand"}</span></p>
    <p class="products__category">Category: ${y}</p>
    <p class="products__price">Price: ${m}$</p>
 </li>`).join("");s.productsList.insertAdjacentHTML("beforeEnd",o)}function k(t){const c=["All",...t].map(e=>`<li class="categories__item">
    <button class="categories__btn" type="button">${e}</button>
    </li>`).join("");s.categoriesList.innerHTML=c}async function C(){try{const t=await P();k(t);const{products:o}=await l(n.PAGE);i(o)}catch{}}async function S(t){const o=t.target.closest(".categories__btn");if(!o)return;f(),L(o),A(),n.PAGE=1;const c=o.textContent;if(c==="All")try{const{products:e}=await l(n.PAGE);i(e)}catch(e){console.error(`Get products error: ${e}`)}else{n.QUERY=c;try{const{products:e}=await v(n.QUERY,n.PAGE);e.length===0?b():i(e)}catch(e){console.error(`Get products error: ${e}`)}}}function u(){s.modal.classList.remove("modal--is-open"),s.body.style.overflow="",window.removeEventListener("keydown",$),s.modal.removeEventListener("click",T)}function $(t){t.code==="Escape"&&u()}function T(t){t.currentTarget===t.target&&u()}document.addEventListener("DOMContentLoaded",C);s.closeModalBtn.addEventListener("click",u);s.categoriesList.addEventListener("click",S);
//# sourceMappingURL=index.js.map
